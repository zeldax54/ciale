{% extends 'gemaBundle::clientlayout.html.twig' %}

  {% block customstylesheets %}
	  <link href="{{ asset('bundles/gema/clientresources/mapa/jquery-jvectormap-2.0.3.css')}}" rel="stylesheet">
	  <link href="{{ asset('bundles/gema/css/jquery.bootgrid.min.css') }}" rel="stylesheet">
	  <link href="{{ asset('bundles/gema/clientresources/css/contactcss.css')}}" rel="stylesheet">


	  <style>
.maxwidth{
	width: 60% !important;
}

	  </style>
	  {% endblock %}
  {% block content %}
	  <img id="mygif" src="{{ asset(gife) }}" style="display: none">
	  <div id="formcontainer" style="width: 70%;display: none">
		  <h3 style="font-family: 'Fago-Bold';color:#254389">Contacte con este vendedor</h3>
		  <form name="form" method="post" id="sendform" action="{{ path('gema_sellermail') }}">
			  <div id="form">
				  <div class="form-group"><label  class="required col-md-2 control-label" >Nombre</label>
					  <div class="col-md-10">
						  <input class="form-control" id="nombre" name="nombre" required="required" maxlength="255" type="text">
					  </div>
				  </div>

				  <div class="form-group"><label  class="col-md-2 control-label">Apellido</label>
					  <div class="col-md-10">
						  <input class="form-control" id="apellido" name="apellido"  maxlength="255" type="text">
					  </div>
				  </div>

				  <div class="form-group"><label  class="col-md-2 control-label">Direccion</label>
					  <div class="col-md-10">
						  <input class="form-control" id="direccion" name="direccion"   type="text">
					  </div>
				  </div>

				  <div class="form-group"><label  class=" col-md-2 control-label">Localidad</label>
					  <div class="col-md-10">
						  <input class="form-control" id="localidad" name="localidad"   type="text">
					  </div>
				  </div>

				  <div class="form-group"><label  class=" col-md-2 control-label">Provincia</label>
					  <div class="col-md-10">
						  <input class="form-control" id="provincia" name="provincia"   type="text">
					  </div>
				  </div>

				  <div class="form-group"><label  class=" col-md-2 control-label">Codigo Postal</label>
					  <div class="col-md-10">
						  <input class="form-control" id="codigopostal" name="codigopostal"   type="text">
					  </div>
				  </div>

				  <div class="form-group"><label  class="required col-md-2 control-label">Email</label>
					  <div class="col-md-10">
						  <input class="form-control" id="email" name="email" required   type="email">
					  </div>
				  </div>

				  <div class="form-group"><label  class="required col-md-2 control-label">Teléfono</label>
					  <div class="col-md-10">
						  <input class="form-control" id="telefono" name="telefono" required   type="number">
					  </div>
				  </div>

				  <div class="form-group"><label  class=" col-md-2 control-label">Empresa</label>
					  <div class="col-md-10">
						  <input class="form-control" id="empresa" name="empresa"    type="text">
					  </div>
				  </div>

				  <div class="form-group"><label  class=" col-md-2 control-label">Consulta</label>
					  <div class="col-md-10">
						  <textarea class="form-control" id="consulta" name="consulta" ></textarea>
					  </div>
				  </div>

				  <div class="form-group" style="display: none"><label  class=" col-md-2 control-label">Destino</label>
					  <div class="col-md-10">
						  <input class="form-control destino" id="destino" value="" name="destino"    type="text">
					  </div>
				  </div>

			  </div>




			  <div class="col-md-offset-2 col-md-10">
				  <button title="Enviar Correo" class="btn btn-default" type="submit" id="bsubmit" name="bsubmit">Enviar</button>

			  </div>

		  </form>
	  </div>
	  <div style="height: 20px !important;"></div>

			<div class="row">

      <div class="col-md-3"  >
       <div id="arg-map" style="height: 500px;width: 293px"></div>
	  </div>

			    <div class="col-md-9"  >

                    {% if datosoficina is not null %}
					<h1 class="redventasHeader" style="margin-left: 10px !important">Oficina Comercial y Administración</h1>
					<div class="redventasheaderdivsep"> </div>
					<div class="redventasheaderdiv redventasheaderdivsep">
                     {{ datosoficina.datosoficina|raw }}<br>
						<h4 class="redventasHeader">STAFF</h4>

					</div>
					{% else %}

					<div class="redventasheaderdivsep">
						<h4 style="text-align: center" class="redventasHeader">Vendedores   de{{ provname|raw }}</h4></div>
					{% endif %}
					<div>
						<div style="margin-top: 10px;text-align: center" >

							{% for s in staff %}
								 {% if loop.index is divisible by(2) %}
						     	<div class=" row">
					           {% endif %}
								<div class="col-md-6" style="margin-bottom: 1em">
									<div class="col-md-3">
									<img  src="{{ asset(s.foto) }}" alt="" width="100" height="100" >
									</div>
									<div class="col-md-9" >
									<p id="infocontainer" style="">

										{% if codigo=='comercial' %}
											<strong class="redventastextbold">{{ s.cargo }}</strong><br>
											{% else %}
												<strong class="redventastext" style="color:#00388B">{{ s.zona }}</strong><br>
										{% endif %}
											<em class="redventastext">{{ s.nombre }}</em><br>
										{% if codigo!='comercial' %}
											<em class="redventastext">{{ s.ciudad }}</em><br>
										{% endif %}
											<span class="redventastext">{{ s.telefono }}</span><br>
											<a  title="Contactarse" class="redventastext redmail" style="cursor: pointer">{{ s.email }}</a>

								</p>
									</div>
								</div>
									 {% if loop.index is divisible by(2) %}
							</div>
					           {% endif %}
							{% endfor %}
						</div>

					</div>

                        </div>
				</div>
	  {% if isdeptotec is  null %}
			<div style="height: 20px !important;"></div>
		  {% endif %}
	  {% if isdeptotec is not null %}

		  <div class="row">
		  <div class="col-md-3"></div>
		  <div class="col-md-9" style="">

			  <h4 class="redventasHeader" style="border-bottom: 1px solid;">DEPTO. TÉCNICO</h4>
			  <div>
				  <div style="margin-top: 10px;text-align: center" >

					  {% for s in deptotec %}
						  {% if loop.index is divisible by(2) %}
							  <div class=" row">
						  {% endif %}
						  <div class="col-md-6" style="margin-bottom: 1em">
							  <div class="col-md-3">
								  <img  src="{{ asset(s.foto) }}" alt="" width="100" height="100" >
							  </div>
							  <div class="col-md-9" >
								  <p id="infocontainer" style="">

									  {% if codigo=='comercial' %}
										  <strong class="redventastextbold">{{ s.cargo }}</strong><br>
									  {% else %}
										  <strong class="redventastext" style="color:#00388B">{{ s.zona }}</strong><br>
									  {% endif %}
									  <em class="redventastext">{{ s.nombre }}</em><br>
									  {% if codigo!='comercial' %}
										  <em class="redventastext">{{ s.ciudad }}</em><br>
									  {% endif %}
									  <span class="redventastext">{{ s.telefono }}</span><br>
									  <a  title="Contactarse" class="redventastext redmail" style="cursor: pointer">{{ s.email }}</a>

								  </p>
							  </div>
						  </div>
						  {% if loop.index is divisible by(2) %}
							  </div>
						  {% endif %}
					  {% endfor %}
				  </div>
			  </div>
		  </div>



	  {% endif %}

	  {% if localdist is not null and localdist|length>0 %}
		  <div class="row" style="text-align: center">
			  <h4 class="redventasHeader">Distribuidores   de{{ provname|raw }}</h4>

			  <div class="col-md-12" style="margin-bottom: 1em;text-align: center;margin-left: 12%;">


				  {% for l in localdist %}

					  {% if loop.index is divisible by(3) or loop.index==0%}
						  <div class=" row" style="">
					  {% endif %}

					  <div class="col-md-3" style="margin-bottom: 1em;text-align: left">
						  <strong class="redventastext">{{ l.ciudad }}</strong><br>
						  <span class="redventastext">{{ l.nombreveterinaria }}</span><br>
						  {% for d in l.datos %}
							  <span class="redventastext">{{ d }}</span><br>
						  {% endfor %}
					  </div>


					  {% if loop.index is divisible by(3) or loop.index==0%}
						  </div>
					  {% endif %}
				  {% endfor %}

			  </div>

		  </div>
	  {% endif %}
	  <h4 class="redventasHeader" style="text-align: center">INTERNACIONAL</h4>
	  {% include '@shared/vendinternac.html.twig' with {'distrib':distrib} %}
	</div>




{% endblock %}

    {% block custom_javascripts %}
		<script src="{{ asset('bundles/gema/clientresources/mapa/jquery-jvectormap-2.0.3.min.js')}}"></script>
		<script src="{{ asset('bundles/gema/clientresources/mapa/jquery-jvectormap-ar-merc.js')}}"></script>
		<script>
			$(function(){

				$('#arg-map').vectorMap(
						{
							map: 'ar_merc',
							backgroundColor:  "#FFFFFF",
							color: '#aaaaaa',

							regionStyle:{
								initial: {
									fill: '#00388B',
									"fill-opacity": 1,
									stroke: 'none',
									"stroke-width": 0,
									"stroke-opacity": 1
								},
								hover: {
									"fill-opacity": 0.8,
									cursor: 'pointer'
								},
								selected: {
									fill: 'yellow'
								},
								selectedHover: {
								}
							},
							markerStyle: {
								initial: {
									image: '/cialesymf/web/library/casa-central.png'
								}
							},
							markers: [
								{latLng: [-34.603722,-58.381592], name: 'Red de Ventas >> Oficina Central y Administración'}],
							onMarkerClick: function(e, code){
								var url = Routing.generate('gema_redventas',{codigo:'comercial'});
								window.location=url;
							},

						onRegionClick: function( event,code){
							var map = $('#arg-map').vectorMap('get', 'mapObject');
//							var name = map.getRegionName(code);
							var url = Routing.generate('gema_redventas',{codigo:code});
							window.location=url;

				         }


						});

			});


			$('.redmail').click(function(){

				$('#destino').attr('value',$(this).html());
            var form=$('#formcontainer');
					form.find('form').attr('id','newform');
					form.find('button').attr('id','newbsubmit');

				var codigo=form.html();

				vex.dialog.alert({ unsafeMessage:codigo

					, className: 'vex-theme-top' ,
					overlayClassName: 'success',
					contentClassName: 'borderblueclass maxwidth',
					closeClassName: 'closebleclass'
				});

                $('.vex-dialog-buttons').first('button').click(function (e) {
                   e.preventDefault();
                    vex.closeTop();
                });



               $('form').on('submit',(function(e){

                    e.preventDefault();
                    $('#newbsubmit').hide();
                    var src=$('#mygif').attr('src');
                    vex.dialog.alert({ unsafeMessage:'<div style="text-align: center">' +
                    '<h5 style="font-family: Fago-Bold">Enviando mensaje</h5>'+
                    '<img width="200px" height="200px" src="'+src+'"><div>'

                        , className: 'vex-theme-wireframe' ,
                        overlayClassName: 'success',
                        contentClassName: 'borderblueclass errormaxwidth',
                        closeClassName: 'closebleclass'
                    });
                    $.ajax({
                        url: Routing.generate('gema_sellermail'),
                        type: "POST",
                        data:  new FormData(this),
                        contentType: false,
                        cache: false,
                        processData:false,
                        success: function(data){
                            vex.closeTop();
                            vex.dialog.alert({ unsafeMessage:'<span>'+data[1]+'</span>'

                                , className: 'vex-theme-wireframe' ,
                                overlayClassName: 'success',
                                contentClassName: 'borderblueclass maxwidth',
                                closeClassName: 'closebleclass',

                            });

                            $('#newbsubmit').show();
                        },
                        error: function(error,stat, err){
                            vex.closeTop();
                            vex.dialog.alert({ unsafeMessage:err+'.Intente mas tarde'

                                , className: 'vex-theme-wireframe' ,
                                overlayClassName: 'success',
                                contentClassName: 'borderblueclass errormaxwidth',
                                closeClassName: 'closebleclass'
                            })
                            $('#newbsubmit').show();
                        }
                    });
                }));


			});

				$('option').mousedown(function(e) {
					e.preventDefault();
					$(this).prop('selected', !$(this).prop('selected'));
					return false;
				});









		</script>

	{% endblock %}